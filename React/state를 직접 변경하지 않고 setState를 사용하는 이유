리액트는 노드끼리 비교할 때 기본적으로 얕은 비교를 사용합니다.

이 때, state 객체를 직접 변경하면 같은 메모리 주소를 사용하게 되고, 얕은 비교는 메모리의 주소 값을 갖고 판단하기 때문에 리액트에서 변화를 감지하지 못하여 렌더링이 되지 않습니다.

따라서 setState를 통해 새로운 상태를 생성하고, 메모리 주소를 변경해야 리액트에서 변화를 감지하여 렌더링을 하게 됩니다.

setState가 비동기적으로 동작하는 이유

state는 변경되면 리렌더링이 발생합니다. 만약 변경되는 state가 많을 수록 리렌더링이 많이 발생할 것이고, 성능 면에서 좋지 못할 수 있습니다.

따라서 React는 변경된 값들을 모아 한 번에 업데이트를 하여 불필요한 렌더링을 줄이는 Batch 기능을 사용합니다.

이 때 Batch 기능의 주기는 16ms입니다.